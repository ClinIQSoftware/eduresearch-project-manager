name: Deploy to Render

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  deploy:
    name: Trigger Render Deploy
    runs-on: ubuntu-latest
    steps:
      - name: Deploy Backend
        if: vars.RENDER_BACKEND_HOOK_URL != ''
        run: |
          curl -X POST "${{ vars.RENDER_BACKEND_HOOK_URL }}"
        continue-on-error: true

      - name: Deploy Frontend
        if: vars.RENDER_FRONTEND_HOOK_URL != ''
        run: |
          curl -X POST "${{ vars.RENDER_FRONTEND_HOOK_URL }}"
        continue-on-error: true

      - name: Note
        run: |
          echo "Render deploys automatically via Git integration."
          echo "This workflow is optional - use deploy hooks for faster deploys."
          echo ""
          echo "To enable deploy hooks:"
          echo "1. Go to Render Dashboard > Service > Settings > Deploy Hooks"
          echo "2. Create a deploy hook"
          echo "3. Add RENDER_BACKEND_HOOK_URL and RENDER_FRONTEND_HOOK_URL as repository variables"
